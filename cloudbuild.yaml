steps:
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args:
  - '-c'
  - |
   docker pull gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:latest || true
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args:
  - '-c'
  - |
   docker pull rustlang/rust:nightly || true
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args: ['-c', 'docker build --build-arg SSH_KEY=$SSH_KEY --squash -t gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:latest -t gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:$REVISION_ID --cache-from gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:latest --cache-from rustlang/rust:nightly .']
  secretEnv: ['SSH_KEY']
images: [
   'gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:latest','gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:$REVISION_ID',
]
secrets:
- kmsKeyName: projects/umpyre/locations/global/keyRings/deploy/cryptoKeys/deploy-key
  secretEnv:
    SSH_KEY: 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
