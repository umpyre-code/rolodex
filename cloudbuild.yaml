steps:
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args:
  - '-c'
  - |
   docker pull gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:latest || true
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args:
  - '-c'
  - |
   docker pull rustlang/rust:nightly || true
- name: 'gcr.io/cloud-builders/docker'
  entrypoint: 'bash'
  args: ['-c', 'docker build --build-arg SSH_KEY="$$SSH_KEY" --build-arg SCCACHE_KEY="$$SCCACHE_KEY"  -t gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:latest -t gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:$REVISION_ID --cache-from gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:latest --cache-from rustlang/rust:nightly .']
  secretEnv: ['SSH_KEY', 'SCCACHE_KEY']
images: [
   'gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:latest','gcr.io/$PROJECT_ID/github.com/umpyre-code/rolodex:$REVISION_ID',
]
timeout: 1h
secrets:
- kmsKeyName: projects/umpyre/locations/global/keyRings/deploy/cryptoKeys/deploy-key
  secretEnv:
    SSH_KEY: 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
    SCCACHE_KEY: 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
