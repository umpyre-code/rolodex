syntax = "proto3";

package rolodex;
option java_package = "rolodex";

service Rolodex {
  rpc AddClient(NewClientRequest) returns (NewClientResponse);
  rpc Authenticate(AuthRequest) returns (AuthResponse);
  rpc GetClient(GetClientRequest) returns (GetClientResponse);
  rpc Check(HealthCheckRequest) returns (HealthCheckResponse);
}

message PhoneNumber {
  string country_code = 1; // Two-letter country (CA, US, UK, ...)
  string national_number = 2;
}

message Location {
  string region = 1;
  string region_subdivision = 2;
  string city = 3;
}

message NewClientRequest {
  string full_name = 1;
  string password_hash = 2;
  string email = 3;
  PhoneNumber phone_number = 4;
  string public_key = 5;
  Location location = 6;
}

message NewClientResponse { string client_id = 1; }

message AuthRequest {
  string client_id = 1;
  string password_hash = 2;
}

message AuthResponse { string client_id = 1; }

message GetClientRequest {
  string calling_client_id = 1;
  string client_id = 2;
}

message GetClientResponse {
  string client_id = 1;
  string full_name = 2;
  string public_key = 3;
}

message HealthCheckRequest { string service = 1; }

message HealthCheckResponse {
  enum ServingStatus {
    UNKNOWN = 0;
    SERVING = 1;
    NOT_SERVING = 2;
  }
  ServingStatus status = 1;
}
